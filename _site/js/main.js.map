{"version":3,"sources":["global_util.js","display.js","dom_elements.js","fontscale.js","game_logic.js","inputs_handler.js","save_file.js","word_generator.js"],"names":["reload","window","location","removeSuccessiveDuplicates","array","result","i","length","push","timestamp","Math","floor","Date","now","titleCase","string","toUpperCase","slice","toLowerCase","display","this","modify","getContentProperty","element","nodeName","replaceElementContent","content","getElementContent","toggleAttribute","attribute","getAttribute","removeAttribute","setAttribute","toggleDrawer","elements","list","input","drawer","replaceOrGetContent","undefined","updateReadout","obj","current_level","save_file","get","current_score","level","textReadoutScore","textReadoutHighscore","highscore","textReadoutLevel","textReadoutLevelinfo","info","counter","read","parseInt","text","count","innerHTML","toggleTheme","a","document","body","getReferenceItem","number","ms_array","join","getMenuItem","level_num","s","state","selectLevel","override","current","querySelector","select","firstChild","next","getLevelsList","getReferenceList","setMenuTabs","tabs","selected","value","updateReferenceList","reference","updateLevelsList","textSelect","triggerElementGlow","color","style","transition","boxShadow","setTimeout","goodGlow","main","badGlow","__generateSpecifics","lvl","path","valid","nodeType","e","console","error","index","Function","bind","init","__s","mainsection","tabmenu","container","levels","readout","settings","generator","score","levelinfo","button","skip","theme","reset","tab_labels","localdb","filechooser","messages","promptdb","message","word","output","item","found","querySelectorAll","fontScale","wordWrap","recalculate","addWrapper","recalculateElement","eh","offsetHeight","ew","offsetWidth","ph","getNominalHeight","pw","getNominalWidth","height_ratio","max","width_ratio","scaleHeight","scaleWidth","ratio","fontSize","parentElement","mh","Infinity","min","mw","classList","game","generateWord","generateNum","textMain","__generateNumFromFormat","format","groups","split","digit_range","__generateDigitGroup","range","single_digit","break_probability","round","random","checkNum","num","letters","__wordToLetters","possible_num","ms","indexOf","__letterToNums","__matchPossibleNum","exploded","trim","multi","letter","nums","exploded_num","addTimestamp","updateScore","times","level_i","__calculateScore","set","MAX_PAST","scaler","timelen","pastinterval","timediff","wpm","0","1","2","3","4","5","6","7","8","9","getTime","inputs","themeListener","generatorListener","WordGenerator","getWord","generatorNumber","generatorOutput","tabsListener","checked","drawerListener","skipListener","resetListener","detail","clearDatabaseFromLocalStorage","levelSelectListener","clicked","target","new_level","inputMain","mainInputListener","keyCode","check","updateMenuList","addEventListener","__appdata__","storage_key","current_stage","expert_scale","master_scale","drawer_open","tab_selected","dark_theme","pass","10","save","log","localStorage","setItem","JSON","stringify","load","parse","getItem","key","removeItem","dbUrl","dbUuid","databaseError","databaseLoaded","requestDatabase","localStorage_db","onDatabaseGet","isOffline","requestLocalFile","promptForDatabase","getfileSize","size","inputPromptdbButton","toFixed","ajaxMakeRequest","onDatabaseError","inputPromptdbMessage","url","callback","xhr","XMLHttpRequest","open","readyState","DONE","status","getResponseHeader","send","success","failure","response","call","superclass","readLocalFile","preventDefault","stopPropagation","file","files","reader","FileReader","onload","evt","db","inputLocaldbMessages","err","readAsText","href","msg","Error","warn","getWordFromNum","working_set","random_index"],"mappings":"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","file":"main.js","sourcesContent":["\r\nvar ms_array = {\r\n    0: ['s', 'c', 'z', 'x'],\r\n    1: ['d', 't', 'th'],\r\n    2: ['n'],\r\n    3: ['m'],\r\n    4: ['r'],\r\n    5: ['l'],\r\n    6: ['ch', 'sh', 'j', 'g'],\r\n    7: ['c', 'g', 'ch', 'q', 'k', 'ng', 'ck'],\r\n    8: ['f', 'ph', 'v'],\r\n    9: ['b', 'p'],\r\n    valid: ['s', 'c', 'z', 'x', 'q', 'd', 't', 'th', 'n', 'm', 'r', 'l', 'ch', 'ck', 'sh', 'ph', 'j', 'g', 'k', 'ng', 'f', 'v', 'b', 'p'],\r\n    multi: ['ch', 'ck', 'sh', 'th', 'ng', 'ph']\r\n}\r\n\r\nfunction reload() {\r\n    window.location.reload();\r\n}\r\n\r\nfunction removeSuccessiveDuplicates(array){\r\n    var result = []\r\n    for (var i = 0; i < array.length; i++) {\r\n        if(array[i-1] != array[i]){\r\n            result.push(array[i]);\r\n        }\r\n    };\r\n    return result\r\n}\r\n\r\nfunction timestamp(){\r\n    return Math.floor(Date.now() / 1)\r\n}\r\n\r\n// Shim for unsupporting browsers\r\nif (!Date.now) {\r\n    Date.now = function() { return new Date().getTime(); }\r\n}\r\n\r\nfunction titleCase(string){\r\n    if (!string) { return \"\"; }\r\n    return string[0].toUpperCase() + string.slice(1).toLowerCase();\r\n}","\r\nvar display = new (function() {\r\n    // This will store the specific elements when generated on init\r\n    this.modify = {};\r\n\r\n    this.getContentProperty = function(element){\r\n        if (element.nodeName == \"INPUT\") {\r\n            return 'value'\r\n        } else {\r\n            return 'innerHTML'\r\n        }\r\n    }\r\n\r\n    this.replaceElementContent = function(element, content) {\r\n        element[this.getContentProperty(element)] = content;\r\n    }\r\n\r\n    this.getElementContent = function(element) {\r\n        return element[this.getContentProperty(element)];\r\n    }\r\n\r\n    this.toggleAttribute = function(element, attribute) {\r\n        if (element.getAttribute(attribute) !== null) {\r\n            element.removeAttribute(attribute);\r\n        } else {\r\n            element.setAttribute(attribute, '');\r\n        }\r\n    }\r\n\r\n    this.toggleDrawer = function() {\r\n        this.toggleAttribute(elements.list.input.drawer, 'checked')\r\n    }\r\n\r\n    this.replaceOrGetContent = function(element, content) {\r\n        if (content === undefined){\r\n            return this.getElementContent(element);\r\n        } else {\r\n            this.replaceElementContent(element, content);\r\n            return true;\r\n        }\r\n    }\r\n\r\n    this.updateReadout = function(){\r\n        var obj = {\r\n            current_level: save_file.get('current_level'),\r\n            current_score: save_file.get('current_score')\r\n        }\r\n        obj.level = save_file.get('levels')[obj.current_level];\r\n\r\n        this.modify.textReadoutScore(obj.current_score)\r\n        this.modify.textReadoutHighscore( obj.level.highscore)\r\n        this.modify.textReadoutLevel(\"Level \" + obj.current_level)\r\n        this.modify.textReadoutLevelinfo(obj.level.info)\r\n        return true;\r\n    }\r\n\r\n    this.counter = function() {\r\n        var read = parseInt(elements.list.text.count.innerHTML) || 0;\r\n        elements.list.text.count.innerHTML = read + 1;\r\n    }\r\n\r\n    this.toggleTheme = function() {\r\n        var a = document.body.getAttribute('dark');\r\n        if(a == false || a == undefined){\r\n            document.body.setAttribute('dark', true)\r\n        } else {\r\n            document.body.removeAttribute('dark');\r\n        }\r\n    }\r\n\r\n    this.getReferenceItem = function(number) {\r\n        return ms_array[number].join(\", \") || \"?\";\r\n    }\r\n\r\n    this.getMenuItem = function(level_num) {\r\n        var obj = save_file.get('levels')[level_num], s;\r\n        if (save_file.get('current_level') == level_num){\r\n            s = \"selected\";\r\n        } else {\r\n            s = \"\";\r\n        }\r\n\r\n        return \"<li \" + s + \" levelnum='\" + level_num + \"'><h4>Level \" + level_num + \"<span>\" + obj.highscore + \"</span></h4>\\n<small>\" + obj.info + \"</small><span progression=\\\"\" + obj.state() + \"\\\"></span></li>\\n\";\r\n    }\r\n\r\n    this.selectLevel = function(level_num, override){\r\n        // If these were separate, would have to pass them around in an object and probably save which one?? (maybe just init)\r\n        var current = document.querySelector('li[selected]') || elements.list.text.select.firstChild,\r\n            next = document.querySelector('li[levelnum=\"' + level_num + '\"]');\r\n\r\n        if ((current == next || !next) && !override) {\r\n            return false\r\n        } else {\r\n            current.removeAttribute('selected');\r\n            next.setAttribute('selected', '');\r\n            return true\r\n        };\r\n    }\r\n\r\n    this.getLevelsList = function() {\r\n        var obj = save_file.get('levels'),\r\n            list = \"\";\r\n\r\n        for (i in obj) {\r\n            list += this.getMenuItem(i);\r\n        }\r\n        return list\r\n    }\r\n\r\n    this.getReferenceList = function() {\r\n        var list = \"\";\r\n        for (var i = 0; i <= 9; i++) {\r\n            list += \"<tr><td>\" + i + \"</td> <td>\" + this.getReferenceItem(i) + \"</td></tr>\";\r\n        };\r\n        return list;\r\n    }\r\n\r\n    this.setMenuTabs = function(){\r\n        var a = elements.list.input.tabs,\r\n            selected = save_file.get('tab_selected');\r\n        for (var i = 0; i < a.length; i++) {\r\n            if(a[i].value === selected){\r\n                a[i].setAttribute('checked', '');\r\n            }\r\n        }\r\n    }\r\n\r\n    this.updateReferenceList = function() {\r\n        this.modify.reference(this.getReferenceList());\r\n    }\r\n\r\n    this.updateLevelsList = function() {\r\n        this.modify.textSelect(this.getLevelsList());\r\n    }\r\n\r\n\r\n    /* Notification / Feedback system */\r\n    this.triggerElementGlow = function(element, color){\r\n        if (!color) { return false; }\r\n\r\n        // Ultra Jank Animation of some properties\r\n\r\n        element.style.transition = 'none';\r\n        element.style.boxShadow = '0 0 0.5em ' + color + ' inset';\r\n        setTimeout(function(){\r\n            element.style.transition = \"all 2s\";\r\n        }, 20);\r\n        setTimeout(function(){\r\n            element.style.boxShadow = '';\r\n        }, 40);\r\n        return true;\r\n    }\r\n    this.goodGlow = function(){\r\n        this.triggerElementGlow(elements.list.input.main, \"#3A8900\");\r\n    };\r\n    this.badGlow = function(){\r\n        this.triggerElementGlow(elements.list.input.main, \"#B31500\");\r\n    };\r\n\r\n\r\n    /* Element specifics are auto-generated on init */\r\n    this.__generateSpecifics = function(obj, lvl, path) {\r\n        obj = obj || elements.list;\r\n        lvl = lvl || 1;\r\n        path = path || \"\";\r\n        if (lvl > 10) { return false; }\r\n\r\n        for (i in obj) {\r\n            try {\r\n                var valid = obj[i].nodeType;\r\n            } catch(e) {\r\n                console.error(\"Element selector problem:\", i, e);\r\n            }\r\n            if (valid !== undefined) {\r\n                var index = (path) ? titleCase(i) : i;\r\n                this.modify[path + index] = new Function('content', 'return this.replaceOrGetContent(this.modify.' + path + index + '__element, content);').bind(this);\r\n                this.modify[path + index + \"__element\"] = obj[i];\r\n            } else {\r\n                this.__generateSpecifics(obj[i], lvl + 1, (lvl > 1) ? path + titleCase(i) : path + i);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    this.init = function(){\r\n        this.__generateSpecifics()\r\n        if ( save_file.get('dark_theme') ) { this.toggleTheme() }\r\n        if ( save_file.get('drawer_open') ) { this.toggleDrawer() }\r\n        this.setMenuTabs();\r\n        this.updateLevelsList();\r\n        this.updateReferenceList();\r\n        this.updateReadout();\r\n        this.selectLevel(save_file.get('current_level'), true);\r\n    }\r\n})();","var elements = new (function() {\r\n    this.__s = { // __selectors - not really meant to be used by programmers\r\n        mainsection: \".maincolumn .main\",\r\n        tabmenu: {\r\n            container: \"#drawer-tabs .tab-container\",\r\n            levels: {\r\n                container: \"#drawer-tabs .tab-container .tab-panel.levelscolumn#tab-1 \",\r\n                readout: \"#drawer-tabs .tab-container .tab-panel.levelscolumn#tab-1 .readout\",\r\n                select: \"#drawer-tabs .tab-container .tab-panel.levelscolumn#tab-1 .select\",\r\n                settings: \"#drawer-tabs .tab-container .tab-panel#tab-1 .settings\"\r\n            },\r\n            generator: {\r\n                container: \"#drawer-tabs .tab-container .tab-panel.generatorscolumn#tab-2 \",\r\n            },\r\n            reference:{\r\n                container: \"#drawer-tabs .tab-container .tab-panel.referencecolumn#tab-3 \",\r\n            }\r\n        }\r\n    }\r\n\r\n    this.list = {\r\n        text: {\r\n            main: this.__s.mainsection + \" p.generated\",\r\n            readout: {\r\n                container: this.__s.tabmenu.levels.readout,\r\n                score: this.__s.tabmenu.levels.readout + \" .score\",\r\n                highscore: this.__s.tabmenu.levels.readout + \" .highscore\",\r\n                level: this.__s.tabmenu.levels.readout + \" .level\",\r\n                levelinfo: this.__s.tabmenu.levels.readout + \" .levelinfo\"\r\n            },\r\n            select: this.__s.tabmenu.levels.container + \" .select ul\",\r\n            count: this.__s.mainsection + \" .numbar span.count\"\r\n        },\r\n        button: {\r\n            skip: this.__s.mainsection + \" .numbar a.skip\",\r\n            theme: this.__s.tabmenu.levels.settings + \" input[name=theme]\",\r\n            reset: this.__s.tabmenu.levels.settings + \" input[name=reset]\"\r\n        },\r\n        input: {\r\n            main: this.__s.mainsection + \" input[name=main_input]\",\r\n            tabs: \"#drawer input[type=radio]\",\r\n            tab_labels: \"#drawer .tab-buttons\",\r\n            drawer: \"input[type=checkbox]#drawer-toggle\",\r\n            localdb: {\r\n                filechooser: this.__s.tabmenu.generator.container + \" input[type=file].submit_db\",\r\n                messages: this.__s.tabmenu.generator.container + \" p.submit_db\"\r\n            },\r\n            promptdb: {\r\n                button: this.__s.tabmenu.generator.container + \" button.prompt_db\",\r\n                message: this.__s.tabmenu.generator.container + \" p.prompt_db\"\r\n            }\r\n        },\r\n        reference: this.__s.tabmenu.reference.container + \" table tbody\",\r\n        generator: {\r\n            container: this.__s.tabmenu.generator.container,\r\n            word: this.__s.tabmenu.generator.container + \" .inputs button\",\r\n            number: this.__s.tabmenu.generator.container + \" .inputs input[type=number]\",\r\n            output: this.__s.tabmenu.generator.container + \" span.generated_word\"\r\n        }\r\n    }\r\n\r\n    /* INIT ROUTINE */\r\n    this.init = function(obj, lvl){\r\n        obj = obj || this.list;\r\n        lvl = lvl || 1;\r\n        if (lvl > 10) {return false} // Recursion limiter - something has gone pretty wrong.\r\n\r\n\r\n        for (item in obj){\r\n            if (typeof(obj[item]) == \"string\") {\r\n                var found = document.querySelectorAll(obj[item]);\r\n                if (found.length === 1) {\r\n                    found = found[0];\r\n                }\r\n                obj[item] = found;\r\n            } else if (typeof(obj[item]) == \"object\") {\r\n                this.init(obj[item], lvl + 1)\r\n            }\r\n        }\r\n    }\r\n})();","\r\nvar fontScale = new (function(){\r\n\r\n    this.init = function(){\r\n        this.elements = document.querySelectorAll(\"[fs-min-width], [fs-max-width], [fs]\");\r\n\r\n        for (var i = 0; i < this.elements.length; i++) {\r\n            this.elements[i].style.wordWrap = 'none';\r\n        };\r\n        this.recalculate();\r\n    }\r\n\r\n    this.recalculate = function(){\r\n        for (var a = 0; a < this.elements.length; a++) {\r\n            this.addWrapper(this.elements[a]);\r\n            this.recalculateElement(this.elements[a].firstChild);\r\n        };\r\n        console.info(\"Fontscale: Recalculated font size.\")\r\n    }\r\n\r\n    this.recalculateElement = function(element){\r\n        var eh = element.offsetHeight,\r\n            ew = element.offsetWidth,\r\n            ph = this.getNominalHeight(element),\r\n            pw = this.getNominalWidth(element),\r\n            height_ratio = Math.max(ph/eh, 0.01),\r\n            width_ratio  = Math.max(pw/ew, 0.01);\r\n        if (height_ratio < width_ratio) {\r\n            this.scaleHeight(element, height_ratio);\r\n        } else {\r\n            this.scaleWidth(element, width_ratio);\r\n        }\r\n    }\r\n\r\n    this.scaleHeight = function(element, ratio){\r\n        element.style.fontSize = ratio*100 + \"%\";\r\n    }\r\n\r\n    this.scaleWidth = function(element, ratio){\r\n        element.style.fontSize = ratio*100 + \"%\";\r\n    }\r\n\r\n    this.getNominalHeight = function(element){\r\n        var ph = element.parentElement.offsetHeight,\r\n            mh = element.parentElement.getAttribute('fs-max-height')/100 * ph || Infinity;\r\n\r\n        return Math.min(ph, mh);\r\n    }\r\n\r\n    this.getNominalWidth = function(element){\r\n        var pw = element.parentElement.offsetWidth,\r\n            mw = element.parentElement.getAttribute('fs-max-width')/100 * pw || Infinity;\r\n\r\n        return Math.min(pw, mw);\r\n    }\r\n\r\n    this.addWrapper = function (element){\r\n        if (!element.firstChild.classList) {\r\n            element.innerHTML = \"<span class='fontscale'>\" + element.innerHTML + \"</span>\";\r\n        }\r\n    }\r\n});","var game = new (function(){\r\n\r\n\r\n    this.generateWord = 'bung';\r\n    this.generateNum = function() {\r\n        display.modify.textMain(this.__generateNumFromFormat(save_file.get('levels')[save_file.get('current_level')].format));\r\n    }\r\n\r\n    this.__generateNumFromFormat = function(format){\r\n        format = format || \"2-12\"\r\n        var groups = format.split('|');\r\n        var result = [];\r\n\r\n        for (var i = 0; i < groups.length; i++) {\r\n            var digit_range = groups[i].split('-');\r\n            result[i] = this.__generateDigitGroup(digit_range);\r\n        };\r\n\r\n        return result.join(' ');\r\n    }\r\n    this.__generateDigitGroup = function(range) {\r\n        var single_digit, result = \"\";\r\n        if (!range[1]) { range[1] = range[0]; }\r\n        var break_probability = 1 / (range[1] - range[0] + 1);\r\n\r\n        for (var i = 1; i <= range[1]; i++) {\r\n            single_digit = Math.round(Math.random()*9);\r\n            result += single_digit;\r\n            if (i >= range[0] && Math.random() <= break_probability) {\r\n                break;\r\n            };\r\n        };\r\n\r\n        return result;\r\n    }\r\n\r\n    this.checkNum = function(num, word) {\r\n        letters = this.__wordToLetters(word);\r\n        var possible_num = [];\r\n        for (var i = 0; i < letters.length; i++) {\r\n            if ( this.ms.valid.indexOf(letters[i]) < 0 ) { continue; }\r\n            possible_num.push(game.__letterToNums(letters[i]));\r\n        };\r\n        return this.__matchPossibleNum(num, possible_num);\r\n    }\r\n\r\n    this.__wordToLetters = function(word) {\r\n        exploded = removeSuccessiveDuplicates(word.trim().toLowerCase().split(''));\r\n        var letters = [],\r\n            index;\r\n\r\n        for (var i = 0; i < exploded.length; i++) {\r\n            index = this.ms.multi.indexOf(exploded[i] + exploded[i + 1]);\r\n            if (index >= 0) {\r\n                letters.push(this.ms.multi[index]);\r\n                i++ // Skip the already-processed letter\r\n            } else {\r\n                letters.push(exploded[i])\r\n            }\r\n        };\r\n\r\n        return letters\r\n    }\r\n    this.__letterToNums = function(letter) {\r\n        nums = [];\r\n        for (i in this.ms) {\r\n            if (i >= 0 && this.ms[i].indexOf(letter) >= 0) {\r\n                nums.push(i);\r\n            }\r\n        };\r\n        return nums;\r\n    }\r\n    this.__matchPossibleNum = function(num, possible_num){\r\n        exploded_num = num.split('');\r\n        if (exploded_num.length != possible_num.length) {\r\n            return false;\r\n        }\r\n        for (var i = 0; i < exploded_num.length; i++) {\r\n            if (possible_num[i].indexOf(exploded_num[i]) < 0){\r\n                return false\r\n            }\r\n        };\r\n        return true;\r\n    }\r\n\r\n    this.addTimestamp = function(){\r\n        save_file.get('times').push(timestamp());\r\n    }\r\n\r\n    this.updateScore = function(){\r\n        var obj = {\r\n            current_score: save_file.get('current_score'),\r\n            levels: save_file.get('levels'),\r\n            times: save_file.get('times')\r\n        };\r\n        var level_i = save_file.get('current_level');\r\n        obj.current_score = this.__calculateScore(obj)\r\n        // Set high score if current is higher\r\n        if (obj.current_score > obj.levels[level_i].highscore){\r\n            obj.levels[level_i].highscore = obj.current_score;\r\n        }\r\n        save_file.set(obj);\r\n    }\r\n\r\n    this.__calculateScore = function(obj) {\r\n        var MAX_PAST = 4;\r\n        var scaler = display.modify.textMain().length,\r\n            timelen = obj.times.length,\r\n            pastinterval = Math.max(Math.min(MAX_PAST, timelen), 1),\r\n            timediff = (obj.times[timelen-1] - obj.times[timelen-pastinterval]) / 1000,\r\n            wpm = Math.round(Math.min(Math.max((60)/(timediff/pastinterval), 1), 300));\r\n\r\n        if (timelen > MAX_PAST){\r\n            obj.times = obj.times.slice(-5);\r\n        }\r\n\r\n        if (pastinterval <= 2){\r\n            return 10;\r\n        }\r\n        return Math.max(Math.round(wpm*scaler), 0);\r\n    }\r\n\r\n    this.init = function(){\r\n        this.ms = ms_array;\r\n        this.generateNum();\r\n    }\r\n})();","var inputs = new (function(){\r\n    this.themeListener = function(){\r\n        save_file.set('dark_theme', !save_file.get('dark_theme'));\r\n        display.toggleTheme();\r\n    }\r\n\r\n    this.generatorListener = function(e){\r\n        var word = WordGenerator.getWord(display.modify.generatorNumber());\r\n        display.modify.generatorOutput(word);\r\n    }\r\n\r\n    this.tabsListener = function(e){\r\n        var a = elements.list.input.tabs;\r\n        setTimeout(function(){\r\n            for (var i = 0; i < a.length; i++){\r\n                if (a[i].checked) {\r\n                    save_file.set('tab_selected', a[i].value)\r\n                }\r\n            }\r\n        }, 50)\r\n    }\r\n\r\n    this.drawerListener = function(e){\r\n        var state = elements.list.input.drawer.checked;\r\n        if (state) {\r\n            save_file.set('drawer_open', true);\r\n        } else {\r\n            save_file.set('drawer_open', false);\r\n        }\r\n    }\r\n\r\n    this.skipListener = function(e){\r\n        game.generateNum();\r\n    }\r\n\r\n    this.resetListener = function(e){\r\n        if (e.detail >= 2) {\r\n            save_file.reset();\r\n            WordGenerator.clearDatabaseFromLocalStorage();\r\n            reload();\r\n        }\r\n    }\r\n\r\n    this.levelSelectListener = function(e) {\r\n        var clicked, target = e.target;\r\n\r\n        for (var i = 0; i < 3; i++) {\r\n            if (target.nodeName == \"LI\"){\r\n                clicked = target;\r\n                break\r\n            } else {\r\n                target = target.parentElement;\r\n            }\r\n        }\r\n        if (!clicked) { return false; }\r\n\r\n        var new_level = clicked.getAttribute('levelnum');\r\n        if (display.selectLevel(new_level)) {\r\n            save_file.set({\r\n                current_score: 0,\r\n                current_level: new_level\r\n            });\r\n            save_file.set('times', [])\r\n            display.modify.inputMain('');\r\n            game.generateNum();\r\n            display.updateReadout();\r\n            fontScale.recalculate();\r\n        }\r\n    }\r\n\r\n    this.mainInputListener = function(e){\r\n        if (e.keyCode == 13) {\r\n            var check = display.replaceOrGetContent(elements.list.text.main.firstChild) || display.modify.textMain();\r\n            if (game.checkNum(check, display.modify.inputMain())){\r\n                display.modify.inputMain('');\r\n                display.goodGlow();\r\n                display.counter();\r\n\r\n                game.generateNum();\r\n                game.addTimestamp();\r\n                game.updateScore();\r\n\r\n                display.updateReadout();\r\n                display.updateMenuList();\r\n                fontScale.recalculate();\r\n            } else {\r\n                display.badGlow();\r\n            }\r\n        }\r\n    }\r\n\r\n    this.init = function(){\r\n        elements.list.button.theme.addEventListener('click', this.themeListener);\r\n        elements.list.button.reset.addEventListener('click', this.resetListener);\r\n        elements.list.button.skip.addEventListener('click', this.skipListener);\r\n\r\n        elements.list.text.select.addEventListener('click', this.levelSelectListener);\r\n        elements.list.input.main.addEventListener('keyup', this.mainInputListener);\r\n        elements.list.generator.word.addEventListener('click', this.generatorListener);\r\n        elements.list.input.drawer.addEventListener('click', this.drawerListener);\r\n        elements.list.input.tab_labels.addEventListener('click', this.tabsListener);\r\n    }\r\n})();","\r\nvar save_file = new (function() {\r\n    // This is the data that gets saved between game states. Functions for manipulating are in save_file.\r\n    this.__appdata__ = {\r\n        storage_key: \"major_training_242e9989-ffa2-48b6-8f46-4b7dfc6c590a\",\r\n        current_stage: 1,\r\n        current_level: 1,\r\n        current_score: 0,\r\n        expert_scale: 30,\r\n        master_scale: 50,\r\n        drawer_open: false,\r\n        tab_selected: \"1\",\r\n        times: [timestamp()],\r\n        dark_theme: false,\r\n\r\n        levels: {\r\n            1: {\r\n                format: \"2\",\r\n                info: \"2 digit numbers only\",\r\n                highscore: 0,\r\n                pass: 75\r\n            },\r\n            2: {\r\n                format: \"3\",\r\n                info: \"3 digit numbers only\",\r\n                highscore: 0,\r\n                pass: 75\r\n            },\r\n            3: {\r\n                format: \"2-3\",\r\n                info: \"2 and 3 digit numbers\",\r\n                highscore: 0,\r\n                pass: 75\r\n            },\r\n            4: {\r\n                format: \"3|3\",\r\n                info: \"2 groups of 3 digit numbers\",\r\n                highscore: 0,\r\n                pass: 75\r\n            },\r\n            5: {\r\n                format: \"4\",\r\n                info: \"4 digit numbers only\",\r\n                highscore: 0,\r\n                pass: 75\r\n            },\r\n            6: {\r\n                format: \"2-4|2-4\",\r\n                info: \"2 groups of 2-4 digit numbers\",\r\n                highscore: 0,\r\n                pass: 75\r\n            },\r\n            7: {\r\n                format: \"2-3|2-3|2-3|2-3\",\r\n                info: \"4 groups of 2-3 digit numbers\",\r\n                highscore: 0,\r\n                pass: 75\r\n            },\r\n            8: {\r\n                format: \"4|3|3\",\r\n                info: \"Phone numbers\",\r\n                highscore: 0,\r\n                pass: 75\r\n            },\r\n            9: {\r\n                format: \"5|5|5|5|5\",\r\n                info: \"Credit card numbers\",\r\n                highscore: 0,\r\n                pass: 75\r\n            },\r\n            10: {\r\n                format: \"40\",\r\n                info: \"40 digit mega numbers\",\r\n                highscore: 0,\r\n                pass: 75\r\n            }\r\n        },\r\n    }\r\n\r\n    this.save = function() {\r\n        console.log(\"Saving:\", this.__appdata__);\r\n        window.localStorage.setItem(this.__appdata__.storage_key, JSON.stringify(this.__appdata__));\r\n    }\r\n\r\n    this.load = function() {\r\n        var read = JSON.parse(window.localStorage.getItem(this.__appdata__.storage_key));\r\n        if (typeof(read) == \"object\" && read !== null) {\r\n            this.__appdata__ = read;\r\n        } else {\r\n            this.save();\r\n        }\r\n    }\r\n    this.get = function(key) {\r\n        return (this.__appdata__[key] === undefined) ? false : this.__appdata__[key];\r\n    }\r\n    this.set = function(key, value) {\r\n        if (typeof(key) == 'object' && !value) {\r\n            for (i in key){\r\n                this.__appdata__[i] = key[i]\r\n            }\r\n        } else {\r\n            this.__appdata__[key] = value;\r\n        }\r\n        this.save();\r\n    }\r\n    this.reset = function(){\r\n        window.localStorage.removeItem(this.__appdata__.storage_key);\r\n    }\r\n\r\n    this.init = function(){\r\n        this.load();\r\n        var a = this.__appdata__.levels;\r\n        for (i in a){\r\n            a[i].state = function(){\r\n                if (this.highscore >= (this.pass + save_file.get(\"master_scale\"))) {\r\n                    return 4\r\n                } else if (this.highscore >= (this.pass + save_file.get(\"expert_scale\"))) {\r\n                    return 3\r\n                } else if (this.highscore >= this.pass) {\r\n                    return 2\r\n                };\r\n                switch (this.highscore) {\r\n                    case 0:\r\n                        return 0\r\n                    default:\r\n                        return 1\r\n                }\r\n            }\r\n        }\r\n    }\r\n})();","/*\r\n\r\n    Pull in a database or use a webservice to generate a word\r\n    for a number in the MajMonic system.\r\n\r\n*/\r\n\r\n\r\nvar WordGenerator = new (function() {\r\n    // this.serviceUrl = \"http://majorsystem.com/generator\"; // NEED TO ADD FALLBACK TO THIS\r\n    this.dbUrl = \"./database/major_database.json\";\r\n    this.dbUuid = \"MajorTrainingDatabase-60b02baf-b5cf-4851-ad39-1644bd5dd5ec\";\r\n    this.databaseError = false;\r\n    this.databaseLoaded = false;\r\n\r\n    this.requestDatabase = function() {\r\n        var localStorage_db = window.localStorage.getItem(this.dbUuid);\r\n\r\n        try {\r\n            if (localStorage_db) {\r\n                this.onDatabaseGet(JSON.parse(localStorage_db), \"Loaded from localstorage! B)\");\r\n            } else if (this.isOffline()) {\r\n                this.requestLocalFile();\r\n            } else {\r\n                this.promptForDatabase();\r\n            }\r\n        } catch(e) {\r\n            this.clearDatabaseFromLocalStorage();\r\n        }\r\n    }\r\n\r\n    this.clearDatabaseFromLocalStorage = function(){\r\n        window.localStorage.removeItem(this.dbUuid);\r\n    }\r\n\r\n    this.promptForDatabase = function(){\r\n        this.getfileSize(this.dbUrl, function(size){\r\n                if (size) {\r\n                    display.modify.inputPromptdbButton(\"Download (\" + (size/1000000).toFixed(2) + \" MB\" + \")\");\r\n                }\r\n        })\r\n        elements.list.input.promptdb.button.addEventListener('click', function(){\r\n            try {\r\n                WordGenerator.ajaxMakeRequest(WordGenerator.dbUrl, WordGenerator.onDatabaseGet, WordGenerator.onDatabaseError)\r\n                elements.list.input.promptdb.button.style.display = \"none\";\r\n                display.modify.inputPromptdbMessage(\"<b>Loading...</b>\")\r\n            } catch(e) {\r\n                console.log(e);\r\n            }\r\n        })\r\n    }\r\n\r\n    this.getfileSize = function(url, callback) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open('HEAD', url);\r\n        xhr.addEventListener('readystatechange', function(){\r\n            if (xhr.readyState === XMLHttpRequest.DONE) {\r\n                if (this.status === 200) {\r\n                    callback(xhr.getResponseHeader(\"Content-Length\"));\r\n                } else {\r\n                    return false;\r\n                }\r\n            }\r\n        });\r\n        xhr.send();\r\n    }\r\n\r\n    this.ajaxMakeRequest = function(url, success, failure) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open('GET', url);\r\n        if (xhr.readyState === 4 && xhr.response === \"\"){\r\n            failure.call(xhr.superclass, \"AJAX request could not be made (probably because offline?)\");\r\n            return false;\r\n        }\r\n\r\n        var superclass = this;\r\n        xhr.addEventListener('readystatechange', function(){\r\n            if (this.readyState === XMLHttpRequest.DONE) {\r\n                if (this.status === 200) {\r\n                    return success.call(superclass, JSON.parse(this.response), \"Had to get it from server :/\") || true;\r\n                } else {\r\n                    return failure.call(superclass, this) || false;\r\n                }\r\n            }\r\n        });\r\n        xhr.send();\r\n    }\r\n\r\n    this.requestLocalFile = function() {\r\n        elements.list.input.localdb.filechooser.style.display = \"block\";\r\n        elements.list.input.localdb.messages.style.display = \"block\";\r\n        elements.list.input.localdb.filechooser.superclass = this; // HACK for Context\r\n        elements.list.input.localdb.filechooser.addEventListener('change', this.readLocalFile)\r\n    }\r\n\r\n    this.readLocalFile = function(e) {\r\n        if (!e) {return false}\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        var file = e.target.files[0] || null\r\n        if (!file) {return false}\r\n\r\n        var reader = new FileReader();\r\n        var superclass = this.superclass; // HACK for Context\r\n        reader.onload = function(evt){\r\n            try {\r\n                var db = JSON.parse(reader.result);\r\n                superclass.onDatabaseGet(db, \"Loaded from local file! \\\\(^.^)/\");\r\n                display.modify.inputLocaldbMessages(\"Thank you! (^.^)\");\r\n                elements.list.input.localdb.filechooser.style.display = \"none\";\r\n            } catch(err) {\r\n                superclass.onDatabaseError(\"Could not parse local file as JSON\");\r\n            }\r\n        }\r\n        reader.readAsText(file);\r\n    }\r\n\r\n    this.isOffline = function(){\r\n        return (window.location.href.indexOf(\"file:///\") >= 0) || false\r\n    }\r\n\r\n    this.onDatabaseGet = function(db, msg){\r\n        msg = msg || \"\";\r\n        try {\r\n            this.db = db;\r\n            if (typeof(this.db) === \"object\"){\r\n                window.localStorage.setItem(this.dbUuid, JSON.stringify(this.db));\r\n                console.info(\"Generator database is up and running!\", msg)\r\n                this.databaseLoaded = true;\r\n                elements.list.input.promptdb.button.style.display = \"none\";\r\n                elements.list.input.promptdb.message.style.display = \"none\";\r\n            } else {\r\n                throw(Error(\"Generator database not retreived as object\"))\r\n            }\r\n        } catch(e) {\r\n            this.onDatabaseError(e);\r\n        }\r\n    }\r\n\r\n    this.onDatabaseError = function(msg){\r\n        msg = msg || \"\";\r\n        this.databaseError = true;\r\n        display.modify.inputPromptdbMessage(\"<b>This is embarrassing...</b><br>The database didn't load properly :/. If this happens again, you should definitely <a href='https://github.com/cemrajc/majortraining/issues'>file a bug report</a>.\")\r\n        console.warn(\"WordGenerator: Sorry, the generator is broken :/\\n\", msg);\r\n    }\r\n\r\n\r\n    this.getWordFromNum = function(num) {\r\n        if (this.databaseLoaded && this.db[num]) {\r\n            var working_set = this.db[num];\r\n            var random_index = Math.round(Math.random() * (working_set.length - 1));\r\n            return titleCase(working_set[random_index]) || \"<i>Error occurred :(</i>\";\r\n        } else {\r\n            if (this.databaseError) {\r\n                return \"<i>Sorry, it's broken :(</i>\"\r\n            } else if (this.databaseLoaded) {\r\n                return \"<i>No word found</i>\"\r\n            } else {\r\n                return \"<i>Waiting for database</i>\"\r\n            }\r\n        }\r\n    }\r\n    this.getWord = this.getWordFromNum;\r\n\r\n\r\n    this.init = function() {\r\n        this.requestDatabase();\r\n    }\r\n})();"],"sourceRoot":"/source/"}